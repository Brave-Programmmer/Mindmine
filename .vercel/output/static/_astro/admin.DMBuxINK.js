import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.B7y88wuR.js";import{l as v,o as f,i as j,c as w,d as y}from"./firebase.Dme28GWg.js";import{y as c,L as N,l as u}from"./index.DXH7Qx-t.js";import{u as C}from"./authStore.CYTjUqjB.js";const d=[{label:"Sunset Horizon",className:"bg-gradient-to-br from-yellow-200 via-orange-300 to-red-400"},{label:"Forest Calm",className:"bg-gradient-to-br from-green-300 via-green-500 to-teal-700"},{label:"Ocean Depth",className:"bg-gradient-to-tr from-blue-200 via-blue-400 to-indigo-700"},{label:"Dusk Glow",className:"bg-gradient-to-br from-purple-300 via-pink-400 to-rose-500"},{label:"Sand & Sky",className:"bg-gradient-to-tr from-yellow-100 via-white to-blue-200"}],H=()=>{const t=C(o=>o.email),[m,s]=i.useState(!1),[a,r]=i.useState({title:"",author:"",genre:"",synopsis:"",coverImage:d[0].className,totalChapters:0,email:""});i.useEffect(()=>{const o=v(),n=f(o,l=>{l&&l.displayName&&r(b=>({...b,author:l.displayName||"",email:l.email||""}))});return()=>n()},[]);const h=o=>{r({...a,[o.target.name]:o.target.value})},p=o=>{r({...a,[o.target.name]:o.target.value})},g=o=>{r({...a,coverImage:o})},x=async()=>{if(!t){c.error("You must be logged in to create a book.",{position:"top-right",autoClose:5e3,theme:"light",transition:u});return}try{const o=new Date().toISOString(),n={...a,createdAt:o,email:t,views:0};await j(w(y,"books"),n),r({title:"",author:"",genre:"",synopsis:"",coverImage:d[0].className,totalChapters:0,email:""}),c.success("New Book Added!",{position:"top-right",autoClose:5e3,theme:"light",transition:u}),s(!1)}catch(o){console.error("Failed to create book:",o),alert("Something went wrong while creating the book.")}};return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{if(!t){c.warn("Please log in to create a book.");return}s(!0)},className:`fixed bottom-6 right-6 p-4 rounded-full shadow-lg z-50 ${t?"bg-rosewood/80 hover:bg-sienna text-white":"bg-gray-400 cursor-not-allowed text-white"}`,"aria-label":"Add New Book",disabled:!t,children:"✚ Create New Book"}),m&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>s(!1),className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold text-rosewood mb-4",children:"Create a New Book"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Title",value:a.title,onChange:h,className:"w-full border border-gray-300 rounded px-3 py-2"}),e.jsx("input",{type:"text",disabled:!0,name:"author",placeholder:"Author",value:a.author,className:"w-full border border-gray-300 rounded px-3 py-2"}),e.jsxs("select",{name:"genre",value:a.genre,onChange:p,className:"w-full border border-gray-300 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Select Genre"}),e.jsx("option",{value:"Romance",children:"Romance"}),e.jsx("option",{value:"Fantasy",children:"Fantasy"}),e.jsx("option",{value:"Mystery",children:"Mystery"}),e.jsx("option",{value:"Science Fiction",children:"Science Fiction"}),e.jsx("option",{value:"Historical Fiction",children:"Historical Fiction"}),e.jsx("option",{value:"Thriller",children:"Thriller"}),e.jsx("option",{value:"Horror",children:"Horror"}),e.jsx("option",{value:"Adventure",children:"Adventure"}),e.jsx("option",{value:"Biography",children:"Biography"}),e.jsx("option",{value:"Self-Help",children:"Self-Help"}),e.jsx("option",{value:"Poetry",children:"Poetry"}),e.jsx("option",{value:"Young Adult",children:"Young Adult"}),e.jsx("option",{value:"Children",children:"Children"}),e.jsx("option",{value:"Non-Fiction",children:"Non-Fiction"}),e.jsx("option",{value:"Dystopian",children:"Dystopian"}),e.jsx("option",{value:"Graphic Novel",children:"Graphic Novel"}),e.jsx("option",{value:"Classic",children:"Classic"}),e.jsx("option",{value:"Humor",children:"Humor"})]}),e.jsx("textarea",{name:"synopsis",placeholder:"Synopsis",value:a.synopsis,onChange:h,className:"w-full border border-gray-300 rounded px-3 py-2",rows:4}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Choose Cover Style"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:d.map(o=>e.jsxs("div",{className:`relative h-36 w-28 cursor-pointer transform transition-transform ${a.coverImage===o.className?"scale-105 ring-2 ring-rosewood":"hover:scale-105"}`,onClick:()=>g(o.className),children:[e.jsx("div",{className:"absolute left-0 top-0 h-full w-4 bg-neutral-800 rounded-l-md shadow-inner z-10"}),e.jsx("div",{className:`h-full w-full pl-4 rounded-r-md ${o.className} shadow-md border border-black/10 overflow-hidden flex flex-col justify-end`,children:e.jsx("div",{className:"bg-black/40 text-white text-xs p-2",children:e.jsx("p",{className:"font-semibold line-clamp-2",children:o.label})})})]},o.label))})]}),e.jsx("button",{onClick:x,className:"w-full bg-rosewood text-white py-2 px-4 rounded hover:bg-sienna transition",children:"Create Book"})]})]})}),e.jsx(N,{})]})};export{H as default};
