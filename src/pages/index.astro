---
import FlippingPageBook from "../components/Flipling";
import Layout from "../layouts/Layout.astro";
import ParticleBackground from "../components/ParticleBackground";
import AllBooksGrid from "../components/AllBooksGrid";

// Predefine community members for better maintainability
const communityMembers = [
  {
    name: "Brave Programmer",
    description: "Mohit Pujari - The Creator of mindMine",
    avatar: "BP",
  },
  {
    name: "ChaosAndSketch",
    description: "Creative Writer & Artist",
    avatar: "CS",
  },
];
---

<Layout title="Welcome">
  <!-- Hero Section -->
  <section
    class="relative overflow-hidden py-20 min-h-[90vh] flex items-center"
    role="banner"
    aria-label="Hero section"
  >
    <ParticleBackground client:load />
    <div
      class="absolute inset-0 bg-gradient-to-br from-blush/20 to-peach/20"
      aria-hidden="true"
    >
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div class="text-left space-y-6">
          <h1
            class="text-4xl sm:text-5xl lg:text-6xl font-bold text-rosewood leading-tight"
          >
            Your Story
            <span class="block text-taupe">Begins Here</span>
          </h1>
          <p class="text-lg sm:text-xl text-taupe max-w-lg leading-relaxed">
            Discover captivating stories, share your own tales, and connect with
            fellow book lovers in our vibrant community.
          </p>
          <div class="flex flex-col sm:flex-row gap-4">
            <a
              href="/books"
              class="bg-rosewood text-white px-8 py-3 rounded-full hover:bg-sienna transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl text-center font-medium"
              aria-label="Explore available books"
            >
              Explore Books
            </a>
            <a
              href="/write"
              class="border-2 border-rosewood text-rosewood px-8 py-3 rounded-full hover:bg-rosewood hover:text-white transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl text-center font-medium"
              aria-label="Start writing your story"
            >
              Start Writing
            </a>
          </div>
        </div>

        <div
          class="relative h-[300px] sm:h-[350px] lg:h-[400px] flex justify-center items-center"
        >
          <div class="transform scale-75 sm:scale-90 lg:scale-100">
            <FlippingPageBook />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16 px-4" aria-labelledby="features-heading">
    <div class="container mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto">
        <article
          class="bg-white p-8 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h2 class="text-2xl sm:text-3xl font-bold text-rosewood mb-4">
            For Readers
          </h2>
          <p class="text-taupe mb-6 leading-relaxed">
            Discover new stories, follow your favorite authors, and build your
            reading list with personalized recommendations.
          </p>
          <a
            href="/books"
            class="inline-block bg-rosewood text-white px-6 py-3 rounded-full hover:bg-sienna transition-colors duration-300 font-medium"
            aria-label="Browse book collection"
          >
            Explore Books
          </a>
        </article>

        <article
          class="bg-white p-8 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h2 class="text-2xl sm:text-3xl font-bold text-rosewood mb-4">
            For Authors
          </h2>
          <p class="text-taupe mb-6 leading-relaxed">
            Share your stories with the world, connect with readers, and grow
            your audience through our supportive platform.
          </p>
          <a
            href="/write"
            class="inline-block bg-rosewood text-white px-6 py-3 rounded-full hover:bg-sienna transition-colors duration-300 font-medium"
            aria-label="Start your writing journey"
          >
            Start Writing
          </a>
        </article>
      </div>
    </div>
  </section>

  <!-- Featured Books Section -->
  <section
    class="py-16 px-4 bg-gradient-to-b from-transparent to-blush/10"
    aria-labelledby="featured-books-heading"
  >
    <div class="container mx-auto">
      <header class="text-center mb-12">
        <h2
          id="featured-books-heading"
          class="text-3xl sm:text-4xl font-bold text-rosewood mb-4"
        >
          Featured Books
        </h2>
        <p class="text-taupe text-lg max-w-2xl mx-auto">
          Discover our handpicked selection of amazing stories curated just for
          you
        </p>
      </header>
      <div class="max-w-7xl mx-auto">
        <AllBooksGrid client:only="react" />
      </div>
    </div>
  </section>

  <!-- Community Section -->
  <section class="py-20 px-4" aria-labelledby="community-heading">
    <div class="container mx-auto">
      <div
        class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center max-w-6xl mx-auto"
      >
        <div class="space-y-6">
          <h2
            id="community-heading"
            class="text-3xl sm:text-4xl font-bold text-rosewood"
          >
            Join Our Community
          </h2>
          <p class="text-taupe text-lg leading-relaxed">
            Connect with fellow writers and readers. Share your stories, get
            constructive feedback, and grow together in our supportive and
            vibrant community.
          </p>
          <a
            href="/community"
            class="inline-block bg-rosewood text-white px-8 py-3 rounded-full hover:bg-sienna transition-colors duration-300 font-medium shadow-lg hover:shadow-xl"
            aria-label="Join our writing community"
          >
            Join Now
          </a>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          {
            communityMembers.map((member) => (
              <article class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                <div class="w-12 h-12 bg-gradient-to-br from-mauve to-rosewood rounded-full mb-4 flex items-center justify-center text-white font-bold text-sm">
                  {member.avatar}
                </div>
                <h3 class="font-semibold text-rosewood text-lg mb-2">
                  {member.name}
                </h3>
                <p class="text-sm text-taupe leading-relaxed">
                  {member.description}
                </p>
              </article>
            ))
          }
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Enhanced animations with better performance */
  @media (prefers-reduced-motion: no-preference) {
    section {
      animation: fadeInUp 0.8s ease-out;
    }

    section:nth-child(2) {
      animation-delay: 0.2s;
    }
    section:nth-child(3) {
      animation-delay: 0.4s;
    }
    section:nth-child(4) {
      animation-delay: 0.6s;
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Accessibility improvements */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Performance optimizations */
  article,
  section {
    will-change: transform;
  }

  /* Enhanced focus states for better accessibility */
  a:focus-visible {
    outline: 2px solid #bc8f8f;
    outline-offset: 2px;
  }
</style>
