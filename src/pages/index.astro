---
import FlippingPageBook from "../components/Flipling";
import Layout from "../layouts/Layout.astro";
import ParticleBackground from "../components/ParticleBackground";
import AllBooksGrid from "../components/AllBooksGrid";

// Predefine community members for better maintainability
const communityMembers = [
  {
    name: "Brave Programmer",
    description: "Mohit Pujari - The Creator of mindMine",
    avatar: "BP",
  },
  {
    name: "ChaosAndSketch",
    description: "Creative Writer & Artist",
    avatar: "CS",
  },
];

const pageDescription = "Welcome to MindMine - the platform where aspiring authors publish interactive books and readers discover immersive storytelling. Start writing or reading today.";
---

<Layout 
  title="Welcome"
  description={pageDescription}
  image="https://mindmine.netlify.app/og-image.png"
  canonical="https://mindmine.netlify.app/"
>
  <!-- Hero Section -->
  <section
    class="relative overflow-hidden py-20 min-h-[90vh] flex items-center"
    role="banner"
    aria-label="Hero section"
  >
    <ParticleBackground client:idle />
    <!-- Only keep overlay if needed for UI/UX -->
    <section class="container mx-auto px-4 relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <article class="text-left space-y-6">
          <h1
            class="text-4xl sm:text-5xl lg:text-6xl font-bold text-rosewood leading-tight animate-slide-in-left"
          >
            Your Story
            <span class="block text-taupe">Begins Here</span>
          </h1>
          <p class="text-lg sm:text-xl text-taupe max-w-lg leading-relaxed animate-fade-in" style="animation-delay: 0.2s">
            Discover captivating stories, share your own tales, and connect with
            fellow book lovers in our vibrant community.
          </p>
          <nav class="flex flex-col sm:flex-row gap-4 animate-fade-in" style="animation-delay: 0.4s">
            <a
              href="/books"
              class="group relative inline-flex items-center justify-center px-8 py-3 rounded-full font-bold text-taupe overflow-hidden transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg hover:shadow-2xl focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2"
              aria-label="Explore available books"
            >
              <div class="absolute inset-0 bg-gradient-to-r from-gold to-sienna opacity-100 group-hover:opacity-0 transition-opacity duration-300"></div>
              <div class="absolute inset-0 bg-gradient-to-r from-sienna to-gold opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <span class="relative flex items-center gap-2">
                <span>üìö</span>
                <span>Explore Books</span>
              </span>
            </a>
            <a
              href="/write"
              class="group relative inline-flex items-center justify-center px-8 py-3 rounded-full font-bold text-taupe border-2 border-gold hover:border-sienna transition-all duration-300 hover:scale-105 active:scale-95 hover:bg-gold/10 focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2"
              aria-label="Start writing your story"
            >
              <span class="flex items-center gap-2">
                <span>‚ú®</span>
                <span>Start Writing</span>
              </span>
            </a>
          </nav>
        </article>

        <aside class="relative h-[300px] sm:h-[350px] lg:h-[400px] flex justify-center items-center animate-slide-in-right transform scale-75 sm:scale-90 lg:scale-100">
          <FlippingPageBook client:idle />
        </aside>
      </section>
    </section>

  <!-- Features Section -->
  <section class="py-16 px-4 container mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl" aria-labelledby="features-heading">
        <article
          class="group bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-gold/50 hover:-translate-y-2"
        >
          <div class="text-4xl mb-4 group-hover:scale-110 transition-transform duration-300">üìñ</div>
          <h2 class="text-2xl sm:text-3xl font-bold text-rosewood mb-4 group-hover:text-gold transition-colors">
            For Readers
          </h2>
          <p class="text-taupe mb-6 leading-relaxed">
            Discover new stories, follow your favorite authors, and build your
            reading list with personalized recommendations.
          </p>
          <a href="/books" class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-full font-bold bg-gradient-to-r from-gold to-sienna text-taupe hover:from-sienna hover:to-gold transition-all duration-300 hover:scale-105 active:scale-95 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2" aria-label="Browse book collection">
            <span>üìö</span>
            <span>Explore Books</span>
          </a>
        </article>

        <article
          class="group bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-sienna/50 hover:-translate-y-2"
        >
          <div class="text-4xl mb-4 group-hover:scale-110 transition-transform duration-300">‚úçÔ∏è</div>
          <h2 class="text-2xl sm:text-3xl font-bold text-rosewood mb-4 group-hover:text-sienna transition-colors">
            For Authors
          </h2>
          <p class="text-taupe mb-6 leading-relaxed">
            Share your stories with the world, connect with readers, and grow
            your audience through our supportive platform.
          </p>
          <a href="/write" class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-full font-bold bg-gradient-to-r from-gold to-sienna text-taupe hover:from-sienna hover:to-gold transition-all duration-300 hover:scale-105 active:scale-95 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2" aria-label="Start your writing journey">
            <span>‚ú®</span>
            <span>Start Writing</span>
          </a>
        </article>
    </section>

  <!-- Featured Books Section -->
  <section class="py-16 px-4 bg-gradient-to-b from-transparent to-blush/10 container mx-auto" aria-labelledby="featured-books-heading">
    <header class="text-center mb-12">
        <h2
          id="featured-books-heading"
          class="text-3xl sm:text-4xl font-bold text-rosewood mb-4"
        >
          Featured Books
        </h2>
        <p class="text-taupe text-lg max-w-2xl mx-auto">
          Discover our handpicked selection of amazing stories curated just for
          you
        </p>
      </header>
      <AllBooksGrid client:visible />
    </section>

  <!-- Community Section -->
  <section class="py-20 px-4 container mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-center max-w-6xl" aria-labelledby="community-heading">
    <article class="space-y-6">
          <h2
            id="community-heading"
            class="text-3xl sm:text-4xl font-bold text-rosewood"
          >
            Join Our Community
          </h2>
          <p class="text-taupe text-lg leading-relaxed">
            Connect with fellow writers and readers. Share your stories, get
            constructive feedback, and grow together in our supportive and
            vibrant community.
          </p>
          <a href="/login" class="inline-flex items-center justify-center gap-2 px-8 py-3 rounded-full font-bold bg-gradient-to-r from-gold to-sienna text-taupe hover:from-sienna hover:to-gold transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2" aria-label="Join our writing community">
            <span>ü§ù</span>
            <span>Join Now</span>
          </a>
        </article>

        <section class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          {
            communityMembers.map((member) => (
              <article class="group bg-white p-6 rounded-2xl shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300 border-2 border-transparent hover:border-gold/50 hover:-translate-y-1">
                <div class="w-12 h-12 bg-gradient-to-br from-mauve to-rosewood rounded-full mb-4 flex items-center justify-center text-white font-bold text-sm group-hover:scale-125 transition-transform duration-300">
                  {member.avatar}
                </div>
                <h3 class="font-semibold text-rosewood text-lg mb-2 group-hover:text-gold transition-colors">
                  {member.name}
                </h3>
                <p class="text-sm text-taupe leading-relaxed">
                  {member.description}
                </p>
              </article>
            ))
          }
        </section>
    </section>
</Layout>

<style>
  /* Enhanced animations with better performance */
  @media (prefers-reduced-motion: no-preference) {
    section {
      animation: fadeInUp 0.8s ease-out;
    }

    section:nth-child(2) {
      animation-delay: 0.2s;
    }
    section:nth-child(3) {
      animation-delay: 0.4s;
    }
    section:nth-child(4) {
      animation-delay: 0.6s;
    }

    .animate-slide-in-left {
      animation: slideInLeft 0.8s ease-out forwards;
      opacity: 0;
    }

    .animate-slide-in-right {
      animation: slideInRight 0.8s ease-out forwards;
      opacity: 0;
    }

    .animate-fade-in {
      animation: fadeIn 0.6s ease-out forwards;
      opacity: 0;
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Accessibility improvements */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Performance optimizations */
  article,
  section {
    will-change: transform;
  }

  /* Enhanced focus states for better accessibility */
  a:focus-visible {
    outline: 2px solid #bc8f8f;
    outline-offset: 2px;
  }

  /* Button glow effect */
  a[href]:not(.btn) {
    position: relative;
  }

  /* Smooth transitions */
  a, button, input, textarea, select {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>
